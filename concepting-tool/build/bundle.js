var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t){return null==t?"":t}function i(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}let g;function y(t){g=t}function $(t){(function(){if(!g)throw new Error("Function called outside component initialization");return g})().$$.on_mount.push(t)}const w=[],b=[],v=[],_=[],x=Promise.resolve();let C=!1;function S(){C||(C=!0,x.then(E))}function k(t){v.push(t)}function E(){const t=new Set;do{for(;w.length;){const t=w.shift();y(t),T(t.$$)}for(;b.length;)b.pop()();for(let e=0;e<v.length;e+=1){const n=v[e];t.has(n)||(n(),t.add(n))}v.length=0}while(w.length);for(;_.length;)_.pop()();C=!1}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const P=new Set;function A(t,e){t&&t.i&&(P.delete(t),t.i(e))}function M(t,e){t.d(1),e.delete(t.key)}function j(l,c,i,u,s,a,f=[-1]){const d=g;y(l);const p=c.props||{},m=l.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:f};let h=!1;m.ctx=i?i(l,p,(t,e,...n)=>{const o=n.length?n[0]:e;return m.ctx&&s(m.ctx[t],m.ctx[t]=o)&&(m.bound[t]&&m.bound[t](o),h&&function(t,e){-1===t.$$.dirty[0]&&(w.push(t),S(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(l,t)),e}):[],m.update(),h=!0,o(m.before_update),m.fragment=!!u&&u(m.ctx),c.target&&(c.hydrate?m.fragment&&m.fragment.l(function(t){return Array.from(t.childNodes)}(c.target)):m.fragment&&m.fragment.c(),c.intro&&A(l.$$.fragment),function(t,n,l){const{fragment:c,on_mount:i,on_destroy:u,after_update:s}=t.$$;c&&c.m(n,l),k(()=>{const n=i.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]}),s.forEach(k)}(l,c.target,c.anchor),E()),y(d)}function D(t,e,n){const o=t.slice();return o[12]=e[n],o[14]=n,o}function L(t,e,n){const o=t.slice();return o[15]=e[n],o[17]=n,o}function O(t){let e,n=[],o=new Map,r=t[2];const l=t=>"style-control_"+t[17];for(let e=0;e<r.length;e+=1){let c=L(t,r,e),i=l(c);o.set(i,n[e]=W(i,c))}return{c(){e=a("section");for(let t=0;t<n.length;t+=1)n[t].c();m(e,"class","control_group svelte-2fsg4b")},m(t,o){u(t,e,o);for(let t=0;t<n.length;t+=1)n[t].m(e,null)},p(t,r){const c=t[2];n=function(t,e,n,o,r,l,c,i,u,s,a,f){let d=t.length,p=l.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],y=new Map,$=new Map;for(m=p;m--;){const t=f(r,l,m),i=n(t);let u=c.get(i);u?o&&u.p(t,e):(u=s(i,t),u.c()),y.set(i,g[m]=u),i in h&&$.set(i,Math.abs(m-h[i]))}const w=new Set,b=new Set;function v(t){A(t,1),t.m(i,a),c.set(t.key,t),a=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],o=e.key,r=n.key;e===n?(a=e.first,d--,p--):y.has(r)?!c.has(o)||w.has(o)?v(e):b.has(r)?d--:$.get(o)>$.get(r)?(b.add(o),v(e)):(w.add(r),d--):(u(n,c),d--)}for(;d--;){const e=t[d];y.has(e.key)||u(e,c)}for(;p;)v(g[p-1]);return g}(n,r,l,1,t,c,o,e,M,W,null,L)},d(t){t&&s(e);for(let t=0;t<n.length;t+=1)n[t].d()}}}function W(t,e){let n,o,r,l,c,g,y,$,w,b=e[15][0]+"",v=e[15][1]+"";function _(...t){return e[9](e[17],...t)}return{key:t,first:null,c(){n=a("label"),o=f(b),r=d(),l=a("input"),g=d(),y=f(v),$=d(),m(l,"type",c=e[15][0].includes("color")?"color":"text"),this.first=n},m(t,e){u(t,n,e),i(n,o),i(n,r),i(n,l),i(n,g),i(n,y),i(n,$),w=p(l,"input",_)},p(t,n){e=t,4&n&&b!==(b=e[15][0]+"")&&h(o,b),4&n&&c!==(c=e[15][0].includes("color")?"color":"text")&&m(l,"type",c),4&n&&v!==(v=e[15][1]+"")&&h(y,v)},d(t){t&&s(n),w()}}}function H(t){let e,n,o,r,l,c,h,g,y,$,w=U,b=[];for(let e=0;e<w.length;e+=1)b[e]=F(D(t,w,e));return{c(){e=a("form"),n=a("label"),o=f("Enter a filename from within the local "),r=a("code"),r.textContent="/static/pages/",l=f(" directory.\n\t\t\t"),c=a("select"),h=a("option"),h.textContent="Pick a page";for(let t=0;t<b.length;t+=1)b[t].c();g=d(),y=a("button"),y.textContent="Submit",h.__value="",h.value=h.__value,m(c,"name","url"),m(y,"type","submit"),m(e,"class","page-picker"),m(e,"action",""),m(e,"method","post")},m(s,a){u(s,e,a),i(e,n),i(n,o),i(n,r),i(n,l),i(n,c),i(c,h);for(let t=0;t<b.length;t+=1)b[t].m(c,null);i(e,g),i(e,y),$=p(e,"submit",t[5])},p(t,e){if(0&e){let n;for(w=U,n=0;n<w.length;n+=1){const o=D(t,w,n);b[n]?b[n].p(o,e):(b[n]=F(o),b[n].c(),b[n].m(c,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=w.length}},d(t){t&&s(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(b,t),$()}}}function R(e){let n;return{c(){n=a("iframe"),n.innerHTML="<p>Sorry, your iframe isn&#39;t loading!</p>",m(n,"title","page-preview"),m(n,"width","100%"),m(n,"height","100%"),n.allowFullscreen=!0},m(t,o){u(t,n,o),e[11](n)},p:t,d(t){t&&s(n),e[11](null)}}}function F(e){let n,o,r,l=e[12]+"";return{c(){n=a("option"),o=f(l),n.__value=r=e[12],n.value=n.__value},m(t,e){u(t,n,e),i(n,o)},p:t,d(t){t&&s(n)}}}function N(e){let n,o,r,l,g,y,$,w,b,v,_=e[3]?"← Close Control Panel":"Open Control Panel →",x=e[2]instanceof Array&&O(e);function C(t,e){return t[0]?R:H}let S=C(e),k=S(e);return{c(){n=a("main"),o=a("section"),r=a("h1"),r.textContent="Site Theming Tool",l=d(),x&&x.c(),y=d(),$=a("button"),w=f(_),b=d(),k.c(),m(r,"class","svelte-2fsg4b"),m(o,"class",g=c(`side-bar ${e[3]?"open":""}`)+" svelte-2fsg4b"),m($,"class","side-bar_toggle svelte-2fsg4b"),m(n,"class","svelte-2fsg4b")},m(t,c){u(t,n,c),i(n,o),i(o,r),i(o,l),x&&x.m(o,null),i(n,y),i(n,$),i($,w),i(n,b),k.m(n,null),v=p($,"click",e[10])},p(t,[e]){t[2]instanceof Array?x?x.p(t,e):(x=O(t),x.c(),x.m(o,null)):x&&(x.d(1),x=null),8&e&&g!==(g=c(`side-bar ${t[3]?"open":""}`)+" svelte-2fsg4b")&&m(o,"class",g),8&e&&_!==(_=t[3]?"← Close Control Panel":"Open Control Panel →")&&h(w,_),S===(S=C(t))&&k?k.p(t,e):(k.d(1),k=S(t),k&&(k.c(),k.m(n,null)))},i:t,o:t,d(t){t&&s(n),x&&x.d(),k.d(),v()}}}let U=["landing-page","blog-template"],q=Array.from(new URL(document.location).searchParams.entries());function I(t,e,n){let o,r,l=q.find(t=>"url"===t[0]),c=!0,i="";async function u(){if(!q.find(t=>"url"===t[0]))return;n(1,o.src=q.find(t=>"url"===t[0])?`./pages/${q.find(t=>"url"===t[0])[1]}`:"",o);await(t=o,new Promise((e,n)=>{t.onload=()=>e(!0),t.onerror=n})).catch(t=>console.error(t));var t;n(2,r=function(t){const e=Array.from(t.contentDocument.styleSheets).filter(e=>null===e.href||e.href.startsWith(t.contentWindow.origin)).reduce((e,n)=>[...e,...Array.from(n.cssRules).reduce((e,n)=>"body"===n.selectorText||":root"===n.selectorText||"*"===n.selectorText?[...e,...Array.from(n.style).filter(t=>t.startsWith("--")).map(e=>[e,"body"===n.selectorText?t.contentWindow.getComputedStyle(t.contentDocument.body).getPropertyValue(e):t.contentWindow.getComputedStyle(t.contentDocument.documentElement).getPropertyValue(e)])]:e,[])],[]);return console.log("previewStyles = ",e),e}(o).map(t=>(a.find(e=>e[0]===t[0])&&(t[1]=a.find(e=>e[0]===t[0])[1]),t)))}function s(t,e){const o=r;if(n(2,r[e][1]=t.target.value,r),n(2,r=o),i){const t=window.location.href.slice(0,window.location.href.indexOf("?")>=0?window.location.href.indexOf("?"):window.location.href.length)+i;window.history.replaceState(null,"",t)}}$(u);let a;return t.$$.update=()=>{if(4&t.$$.dirty&&q&&r&&(i="?"+`${q.find(t=>"url"===t[0])?"url="+q.find(t=>"url"===t[0])[1]:""}${r?"&"+r.map(t=>encodeURIComponent(t[0])+"="+encodeURIComponent(t[1])).join("&"):""}`),6&t.$$.dirty&&o&&o.contentDocument&&r){const t=o.contentDocument.documentElement.innerHTML.includes('style id="injected"');n(1,o.contentDocument.documentElement.innerHTML=t?o.contentDocument.documentElement.innerHTML.replace(/<style id="injected">(.|\t|\r|\n)*<\/head>/,`<style id='injected'>\n\t\t\tbody { ${r.map(t=>t[0]+": "+t[1]).join("; ")} }\n\t\t</style>\n\t\t</head>`):o.contentDocument.documentElement.innerHTML.replace("</head>",`<style id='injected'>\n\t\t\tbody { ${r.map(t=>t[0]+": "+t[1]).join("; ")} }\n\t\t</style>\n\t\t</head>`),o)}},a=q.filter(t=>t[0].startsWith("--")),[l,o,r,c,s,async function(t){t.preventDefault();const e=t.target.querySelector("select"),o=e.value;let r=await fetch("./pages/"+o);if(r=404!==r.status,console.log("localPageFound = ",r),!r)return void(e.value="");const c=[...q];c.push(["url",o]),q=c,n(0,l=!0),await(S(),x),window.history.replaceState(null,"",window.location.href+"?url="+o),u()},i,a,u,(t,e)=>s(e,t),()=>n(3,c=!c),function(t){b[t?"unshift":"push"](()=>{n(1,o=t)})}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}{constructor(t){super(),j(this,t,I,N,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
