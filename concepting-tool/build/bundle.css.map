{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<script context='module'>\n\tlet currQueryParams = Array.from((new URL(document.location)).searchParams.entries())\n</script>\n\n<script>\n\timport { onMount, tick } from 'svelte'\n\timport { loadIFramePromise, getIFrameCustomCSS } from './utils/iframeStyling'\n\tlet iFrameInitialized = currQueryParams.find(item => item[0] === 'url')\n\tlet previewFrame, previewStyles\n\tlet paramStyles = ''\n\n\t$: queryStyles = currQueryParams.filter(param => param[0].startsWith('--'))\n\n\tlet queryString = ''\n\t$: if (currQueryParams && previewStyles) {\n\t\tqueryString = '?'+(`${(currQueryParams.find(param => param[0] === 'url')) ? 'url='+currQueryParams.find(param => param[0] === 'url')[1] : ''}${ (previewStyles) ? '&'+previewStyles.map(style => (encodeURIComponent(style[0])+'='+encodeURIComponent(style[1]))).join('&') : '' }`)\n\t\tconsole.log('queryString = ', queryString)\n\t}\n\n\n\t$: if (previewFrame && previewFrame.contentDocument && previewStyles) {\n\t\tconsole.log('document =', previewFrame.contentDocument.documentElement.innerHTML)\n\n\t\tconst hasInjectedStyles = (previewFrame.contentDocument.documentElement.innerHTML).includes('style id=\"injected\"')\n\n\t\tpreviewFrame.contentDocument.documentElement.innerHTML = (hasInjectedStyles)\n\t\t\t? (previewFrame.contentDocument.documentElement.innerHTML).replace(/<style id=\"injected\">(.|\\t|\\r|\\n)*<\\/head>/, `<style id='injected'>\n\t\t\tbody { ${ previewStyles.map(style => style[0] +': '+ style[1]).join('; ') } }\n\t\t</style>\n\t\t</head>`)\n\t\t\t: (previewFrame.contentDocument.documentElement.innerHTML).replace('</head>', `<style id='injected'>\n\t\t\tbody { ${ previewStyles.map(style => style[0] +': '+ style[1]).join('; ') } }\n\t\t</style>\n\t\t</head>`)\n\n\t}\n\n\tonMount(handleMount)\n\n\tasync function handleMount() {\n\t\tconsole.log('queryStyles = ', queryStyles)\n\t\tif (!currQueryParams.find(item => item[0] === 'url')) return\n\n\t\tpreviewFrame.src = currQueryParams.find(item => item[0] === 'url')\n\t\t\t? `./pages/${ currQueryParams.find(item => item[0] === 'url')[1] }`\n\t\t\t: ''\n\n\t\t// WAIT FOR IFRAME TO LOAD\n\t\tconst previewFrameLoaded = await loadIFramePromise(previewFrame).catch(err => console.error(err))\n\n\t\t// EXTRACT BODY, :ROOT, AND * CSS VARIABLES\n\t\tpreviewStyles = getIFrameCustomCSS(previewFrame).map(style => {\n\t\t\tif (queryStyles.find(qStyle => qStyle[0] === style[0])) {\n\t\t\t\tstyle[1] = queryStyles.find(qStyle => qStyle[0] === style[0])[1]\n\t\t\t}\n\t\t\treturn style\n\t\t})\n\t\tconsole.log('previewStyles = ', previewStyles)\n\n\t\t// CREATE UI CONTROLS FOR EACH TOP LEVEL VARIABLE BASED ON TYPE\n\n\n\t\t\n\n\t\t// TODO: LOAD QUERY PARAMS AND ASSIGN TO IFRAME PAGE BY CREATING A NEW CSS FILE AND INSERTING AT END OF HEAD TAG\n\n\t}\n\n\t// TODO: WRITE TO URL AS QUERY PARAMS WHEN EDITING ANY CSS VARIABLE VALUES\n\tfunction updateStyles(e, index) {\n\t\tconsole.log('e & index = ', e, index)\n\t\tconst newStyles = previewStyles\n\t\tpreviewStyles[index][1] = e.target.value \n\t\tpreviewStyles = newStyles\n\n\t\tif (queryString) {\n\t\t\tconst url = window.location.href + '/' + queryString\n\n\t\t\twindow.history.replaceState(null, '', url)\n\t\t}\n\t}\n\n\tasync function handleURLEnter(e) {\n\t\te.preventDefault()\n\t\t\n\t\tconst input = e.target.querySelector('input')\n\t\tconst url = input.value\n\n\t\tlet localPageFound = await fetch('./pages/'+url)\n\n\t\tlocalPageFound = localPageFound.status === 404 ? false : true\n\n\t\tconsole.log('localPageFound = ', localPageFound)\n\n\t\tif (!localPageFound) {\n\t\t\tinput.value = ''\n\t\t\treturn\n\t\t}\n\n\t\tconst newQueryParams = [...currQueryParams]\n\t\tnewQueryParams.push(['url', url])\n\n\t\tcurrQueryParams = newQueryParams\n\n\t\tconsole.log('currQueryParams = ', currQueryParams)\n\n\t\tiFrameInitialized = true\n\t\tawait tick()\n\n\t\twindow.history.replaceState(null, '', window.location.href +'?url='+ url)\n\n\t\thandleMount()\t\t\n\t}\n</script>\n\n<main>\n\t<h1>Query Param Test</h1>\n\t<section>\n\t\t<h2>URL params</h2>\n\t\t<table>\n\t\t\t<tbody>\n\t\t\t\t<tr><th>Key</th><th>Value</th></tr>\n\t\t\t\t{#each currQueryParams as param, i}\n\t\t\t\t<tr>\n\t\t\t\t\t<td>{ param[0] }</td>\n\t\t\t\t\t<td>{ param[1] }</td>\n\t\t\t\t</tr>\n\t\t\t\t{/each}\n\t\t\t</tbody>\n\t\t</table>\n\t</section>\n\t{#if previewStyles instanceof Array}\n\t<section>\n\t\t{#each previewStyles as style, j ('style-control_'+j)}\n\t\t<label>\n\t\t\t{ style[0] }\n\t\t\t<input type='color' on:change={ (e) => updateStyles(e, j) } />\n\t\t\t{ style[1] }\n\t\t</label>\n\t\t{/each}\n\t</section>\n\t{/if}\n\t{#if iFrameInitialized}\n\t<iframe title='page-preview' bind:this={ previewFrame } width='80%' height='600' allowfullscreen>\n\t\t<p>Sorry, your iframe isn't loading!</p>\n\t</iframe>\n\t{:else}\n\t<form action='' method='post' on:submit={handleURLEnter}>\n\t\t<label>Enter a filename from within the local <code>/static/pages/</code> directory.\n\t\t\t<input type='text' name='url' required />\n\t\t</label>\n\t\t<button type='submit'>Submit</button>\n\t</form>\n\t{/if}\n</main>\n\n<style>\n\tmain {\n\t\t--h-color: #ff3e00;\n\t\t--body-color: black;\n\t\t--bg: white;\n\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t\tbackground: var(--bg);\n\t\tcolor: var(--body-color);\n\t\tmin-height: 100%;\n\t}\n\n\th1 {\n\t\tcolor: var(--h-color);\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n\n\tsection {\n\t\tmargin: 2em 0;\n\t}\n\n\ttable {\n\t\twidth: fit-content;\n\t\tmargin: auto;\n\t\tborder-collapse: collapse;\n\t}\n\n\ttd, th {\n\t\tborder: solid 1px;\n\t\tpadding: .3em 1em;\n\t}\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>"
  ],
  "names": [],
  "mappings": "AA6JC,IAAI,cAAC,CAAC,AACL,SAAS,CAAE,OAAO,CAClB,YAAY,CAAE,KAAK,CACnB,IAAI,CAAE,KAAK,CAEX,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,CAAC,CAAC,IAAI,CACd,UAAU,CAAE,IAAI,IAAI,CAAC,CACrB,KAAK,CAAE,IAAI,YAAY,CAAC,CACxB,UAAU,CAAE,IAAI,AACjB,CAAC,AAED,EAAE,cAAC,CAAC,AACH,KAAK,CAAE,IAAI,SAAS,CAAC,CACrB,cAAc,CAAE,SAAS,CACzB,SAAS,CAAE,GAAG,CACd,WAAW,CAAE,GAAG,AACjB,CAAC,AAED,OAAO,cAAC,CAAC,AACR,MAAM,CAAE,GAAG,CAAC,CAAC,AACd,CAAC,AAED,KAAK,cAAC,CAAC,AACN,KAAK,CAAE,WAAW,CAClB,MAAM,CAAE,IAAI,CACZ,eAAe,CAAE,QAAQ,AAC1B,CAAC,AAED,gBAAE,CAAE,EAAE,cAAC,CAAC,AACP,MAAM,CAAE,KAAK,CAAC,GAAG,CACjB,OAAO,CAAE,IAAI,CAAC,GAAG,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,IAAI,cAAC,CAAC,AACL,SAAS,CAAE,IAAI,AAChB,CAAC,AACF,CAAC"
}